{% extends "layout.html" %}
{% block title %}Avatar Selection{% endblock %}

{% block content %}

<div class="container bg-beige full-height">

    <br>
    <div class="progress">
        <div class="progress-bar" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0"
            aria-valuemax="100"></div>
    </div>

    <br>
    <div class="row">
        <div class="col" align='center'>
            <h2>Pick An Avatar!</h2>
        </div>
    </div>

    <br>
    <div id="convo-circle" class="bg-blue convo-circle">
        <p>Fab!</p>
    </div>
    <!-- <div class="row bg-light-blue" style="margin-top: -20px;">
            <div class="col padding-0" align="center" id="image-choice">
                <img width="250px" src="../static/img/avatar-1.svg">
            </div>
        </div> -->

    <div id="carouselControls" class="carousel slide bg-light-blue multi-item-carousel"
        style="margin-top: -20px; position: absolute; left: 0; right: 0;" data-interval="false">
        <div class="carousel-inner">

            <div class="carousel-item active image-choice" align="center">
                <img width="250px" src="../static/img/avatar-1.svg">
            </div>
            <div class="carousel-item image-choice" align="center">
                <img width="250px" src="../static/img/avatar-1.svg">
            </div>
            <div class="carousel-item image-choice" align="center">
                <img width="250px" src="../static/img/avatar-1.svg">
            </div>
            <div class="carousel-item image-choice" align="center">
                <img width="250px" src="../static/img/avatar-1.svg">
            </div>

        </div>
        <a class="carousel-control-prev" href="#carouselControls" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselControls" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
    <br>

    <br><br><br><br><br><br><br>
    <div class="row text-center" >
        <div class="col">
            <p>Swipe to change your skintone!</p>
        </div>
    </div>
    <br>
    <div id="avatars">
        <div class="row avatar-row">
            
            <div class="col padding-0" align="center">
                <button id="avatar-1" class="avatar-btn">
                    <img class="avatar-img" src="../static/img/avatar-1.svg">
                </button>
            </div>
            <div class="col padding-0" align="center">
                <button id="avatar-2" class="avatar-btn">
                    <img class="avatar-img" src="../static/img/avatar-2.svg">
                </button>
            </div>
            <div class="col padding-0" align="center">
                <button id="avatar-3" class="avatar-btn">
                    <img class="avatar-img" src="../static/img/avatar-3.svg">
                </button>
            </div>
        </div>

        <div class="row avatar-row">
            <div class="col padding-0" align="center">
                <button id="avatar-4" class="avatar-btn">
                    <img class="avatar-img" src="../static/img/avatar-4.svg">
                </button>
            </div>
            <div class="col padding-0" align="center">
                <button id="avatar-5" class="avatar-btn">
                    <img class="avatar-img" src="../static/img/avatar-1.svg">
                </button>
            </div>
            <div class="col padding-0" align="center">
                <button id="avatar-6" class="avatar-btn">
                    <img class="avatar-img" src="../static/img/avatar-1.svg">
                </button>
            </div>
        </div>

        <div class="row avatar-row">
            <div class="col padding-0" align="center">
                <button id="avatar-7" class="avatar-btn">
                    <img class="avatar-img" src="../static/img/avatar-4.svg">
                </button>
            </div>
            <div class="col padding-0" align="center">
                <button id="avatar-8" class="avatar-btn">
                    <img class="avatar-img" src="../static/img/avatar-1.svg">
                </button>
            </div>
            <div class="col padding-0" align="center">
                <button id="avatar-9" class="avatar-btn">
                    <img class="avatar-img" src="../static/img/avatar-1.svg">
                </button>
            </div>
        </div>

        <div class="row avatar-row">
            <div class="col padding-0" align="center">
                <button  onclick="window.location.href='/name'">
                    <img width="85%" style="margin-top: -20%;" src="../static/img/back.svg">
                </button>
            </div>
            <div class="col padding-0" align="center">
                <button id="avatar-10" style="margin-top: -30%;" class="avatar-btn">
                    <img class="avatar-img" style="margin-top: -20%;" src="../static/img/avatar-1.svg">
                </button>
            </div>
            <div class="col padding-0" align="center">
                <button  onclick="window.location.href='/confirm-avatar'">
                    <img width="85%" style="margin-left: 15%; margin-top: -20%;" src="../static/img/next.svg">
                </button>
            </div>
        </div>
    </div>

</div>

{% endblock %}

{% block scripts %}
<script>
    $(function () {
        $("#skin-tones").bind("focusin", function () {
            var focused_btn = $(":focus")
            console.log(focused_btn)
        })
    });

    $(function () {
        $("#avatars").bind("focusin", function () {
            var focused_btn = $(":focus")
            if (focused_btn.attr("class") !== undefined) {
                $(".image-choice").find("img").each(function (element) {
                    $(this)[0].src = focused_btn.find("img")[0].src
                    sessionStorage.setItem("chosen-avatar", focused_btn[0].id)

                })

            }

            var text = ["Fab!", "Gr8!", "Nice!"]
            var option = Math.floor(Math.random() * 3)

            $("#convo-circle").find("p").text(text[option])

        })
    });

    $(".carousel").on("touchstart", function (event) {
        var xClick = event.originalEvent.touches[0].pageX;
        $(this).one("touchmove", function (event) {
            var xMove = event.originalEvent.touches[0].pageX;
            if (Math.floor(xClick - xMove) > 5) {
                $(this).carousel('next');
            }
            else if (Math.floor(xClick - xMove) < -5) {
                $(this).carousel('prev');
            }
        });
        $(".carousel").on("touchend", function () {
            $(this).off("touchmove");
        });
    });


</script>
{% endblock %}